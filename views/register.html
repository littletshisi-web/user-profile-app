<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Character encoding for proper text rendering -->
  <meta charset="UTF-8">

  <!-- Responsive viewport settings for mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Page title shown in browser tab -->
  <title>Register - User Profile App</title>

  <!-- Bootstrap CSS for layout and components -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome for icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <!-- Inline CSS for background and layout -->
  <style>
    /* âœ… Full-page background and centered layout */
    body {
      background: linear-gradient(135deg, #f5f5dc 0%, #faf0e6 50%, #faf0e6 100%); /* Soft beige gradient */
      min-height: 100vh; /* Full viewport height */
      display: flex; /* Enables flexbox layout */
      align-items: center; /* Vertically centers content */
      justify-content: center; /* Horizontally centers content */
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Clean, modern font stack */
    }

    
    /* Container for the registration form */
.register-container {
  background: rgba(255, 255, 255, 0.95); /* Semi-transparent white background */
  backdrop-filter: blur(10px); /* Adds a blur effect behind the container */
  border-radius: 20px; /* Rounded corners */
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); /* Soft shadow for depth */
  padding: 3rem; /* Inner spacing */
  width: 100%; /* Full width of parent */
  max-width: 450px; /* Maximum width */
  border: 1px solid rgba(255, 255, 255, 0.2); /* Light border for subtle outline */
}

/* Header section of the registration form */
.register-header {
  text-align: center; /* Center-align text */
  margin-bottom: 2rem; /* Space below header */
}

/* Main heading inside the header */
.register-header h2 {
  color: #333; /* Dark text color */
  font-weight: 700; /* Bold text */
  margin-bottom: 0.5rem; /* Space below heading */
}

/* Subtext or description in the header */
.register-header p {
  color: #666; /* Medium gray text */
  font-size: 0.9rem; /* Slightly smaller font size */
}

/* Floating form field wrapper */
.form-floating {
  margin-bottom: 1.5rem; /* Space between fields */
}

/* Input fields inside floating form */
.form-floating input {
  border: 2px solid #e9ecef; /* Light border */
  border-radius: 10px; /* Rounded corners */
  padding: 1rem 0.75rem 1rem 3.5rem; /* Extra left padding for icon space */
  transition: all 0.3s ease; /* Smooth transition on focus */
}

/* Input field focus styles */
.form-floating input:focus {
  border-color: #d2b48c; /* Tan border on focus */
  box-shadow: 0 0 0 0.2rem rgba(210, 180, 140, 0.25); /* Highlight effect */
}

/* Icon inside input field */
.input-icon {
  position: absolute; /* Positioned relative to parent */
  left: 1.25rem; /* Distance from left */
  top: 50%; /* Vertically centered */
  transform: translateY(-50%); /* Perfect vertical centering */
  color: #6c757d; /* Gray icon color */
  z-index: 3; /* Ensure icon appears above input */
  font-size: 0.9rem; /* Icon size */
}

/* Register button styles */
.btn-register {
  background: linear-gradient(135deg, #d2b48c 0%, #f5deb3 100%); /* Gradient background */
  border: none; /* No border */
  border-radius: 10px; /* Rounded corners */
  padding: 0.75rem 2rem; /* Button padding */
  font-weight: 600; /* Semi-bold text */
  font-size: 1.1rem; /* Slightly larger text */
  color: #333; /* Dark text color */
  width: 100%; /* Full width button */
  transition: all 0.3s ease; /* Smooth hover/active transitions */
  position: relative; /* For potential future positioning */
  overflow: hidden; /* Hide overflow effects */
}

/* Hover effect for register button */
.btn-register:hover {
  transform: translateY(-2px); /* Slight lift on hover */
  box-shadow: 0 10px 25px rgba(210, 180, 140, 0.3); /* Shadow effect */
  color: #333; /* Maintain text color */
}

/* Active (clicked) state for register button */
.btn-register:active {
  transform: translateY(0); /* Reset position */
}

/* Login button styles */
.btn-login {
  background: transparent; /* No background */
  border: 2px solid #d2b48c; /* Tan border */
  border-radius: 10px; /* Rounded corners */
  padding: 0.75rem 2rem; /* Button padding */
  font-weight: 600; /* Semi-bold text */
  font-size: 1.1rem; /* Slightly larger text */
  color: #d2b48c; /* Tan text color */
  width: 100%; /* Full width button */
  transition: all 0.3s ease; /* Smooth transitions */
  margin-top: 1rem; /* Space above button */
}

/* Hover effect for login button */
.btn-login:hover {
  background: #d2b48c; /* Fill background with tan */
  color: white; /* White text on hover */
  transform: translateY(-2px); /* Slight lift */
}
    
    /* Alert box styling */
.alert {
  border-radius: 10px; /* Rounded corners */
  border: none; /* No border */
  margin-top: 1rem; /* Space above the alert */
}

/* Class to apply floating animation */
.floating-animation {
  animation: float 3s ease-in-out infinite; /* Smooth up-down animation loop */
}

/* Keyframes for floating effect */
@keyframes float {
  0%, 100% { transform: translateY(0px); } /* Start and end at original position */
  50% { transform: translateY(-10px); } /* Move up slightly in the middle */
}

/* Spinner hidden by default */
.loading-spinner {
  display: none; /* Hidden until loading state is active */
}

/* Show spinner when loading class is applied */
.loading .loading-spinner {
  display: inline-block; /* Show spinner during loading */
}

/* Hide button text when loading */
.loading .btn-text {
  display: none; /* Hide text to show only spinner */
}

/* Password requirements box styling */
.password-requirements {
  background: #f8f9fa; /* Light gray background */
  border-radius: 10px; /* Rounded corners */
  padding: 1rem; /* Inner spacing */
  margin-top: 1rem; /* Space above the box */
  border-left: 4px solid #d2b48c; /* Highlighted left border in tan */
  font-size: 0.85rem; /* Slightly smaller text */
  color: #666; /* Medium gray text */
}

/* Title inside password requirements */
.password-requirements h6 {
  color: #333; /* Dark text */
  font-weight: 600; /* Semi-bold */
  margin-bottom: 0.5rem; /* Space below heading */
}

/* Unordered list inside password requirements */
.password-requirements ul {
  margin: 0; /* Remove default margin */
  padding-left: 1.2rem; /* Indent list items */
}

/* List item spacing */
.password-requirements li {
  margin-bottom: 0.25rem; /* Space between items */
}
</style>
</head>
<body>
  <!-- Registration form container -->
  <div class="register-container">
    
    <!-- Header section with icon, title, and subtitle -->
    <div class="register-header">
      <i class="fas fa-user-plus fa-3x text-primary mb-3"></i> <!-- User icon -->
      <h2>Create Account</h2> <!-- Main heading -->
      <p>Join us and start your journey</p> <!-- Subheading -->
    </div>
    
  <!-- Registration form -->
  <form id="registerForm" action="/register" method="post">
    
    <!-- Username input field with icon -->
    <div class="form-floating position-relative">
      <i class="fas fa-user input-icon"></i> <!-- Icon inside input -->
      <input type="text" class="form-control" name="username" id="username" placeholder="Username" required>
      <label for="username">Username</label>
    </div>
    
    <!-- Optional email input field with icon -->
    <div class="form-floating position-relative">
      <i class="fas fa-envelope input-icon"></i>
      <input type="email" class="form-control" name="email" id="email" placeholder="Email address">
      <label for="email">Email address (optional)</label>
    </div>
    
    <!-- Password input field with icon -->
    <div class="form-floating position-relative">
      <i class="fas fa-lock input-icon"></i>
      <input type="password" class="form-control" name="password" id="password" placeholder="Password" required>
      <label for="password">Password</label>
    </div>
    
    <!-- Confirm password input field with icon -->
    <div class="form-floating position-relative">
      <i class="fas fa-lock input-icon"></i>
      <input type="password" class="form-control" name="confirmPassword" id="confirmPassword" placeholder="Confirm Password" required>
      <label for="confirmPassword">Confirm Password</label>
    </div>
    
    <!-- Submit button with loading spinner -->
    <button type="submit" class="btn btn-register">
      <span class="btn-text">
        <i class="fas fa-user-plus me-2"></i>Create Account
      </span>
      <span class="loading-spinner">
        <i class="fas fa-spinner fa-spin me-2"></i>Creating Account...
      </span>
    </button>
    
    <!-- Error message container (hidden by default) -->
    <div id="error" class="alert alert-danger" style="display:none;"></div>
  </form>
  
  <!-- Password requirements info box -->
  <div class="password-requirements">
    <h6><i class="fas fa-info-circle me-2"></i>Password Requirements</h6>
    <ul>
      <li>At least 6 characters long</li>
      <li>Use a combination of letters and numbers</li>
      <li>Avoid common passwords</li>
    </ul>
  </div>
  
  <!-- Link to login page -->
  <a href="/" class="d-block mt-3 text-center"><i class="fas fa-sign-in-alt me-2"></i>Already have an account? Sign In</a>
</div>

<!-- JavaScript to handle form logic -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('registerForm'); // Form element
    const errorDiv = document.getElementById('error'); // Error message container
    const passwordInput = document.getElementById('password'); // Password input field
    const confirmPasswordInput = document.getElementById('confirmPassword'); // Confirm password field

    if (!form) return;

    // Add loading state to the submit button when form is submitted
    form.addEventListener('submit', function(e) {
      // Clear any previous error
      errorDiv.style.display = 'none';
      errorDiv.innerHTML = '';

      // Check if passwords match
      if (passwordInput.value !== confirmPasswordInput.value) {
        e.preventDefault(); // Prevent form submission
        errorDiv.innerHTML = '<i class="fas fa-exclamation-triangle me-2"></i>Passwords do not match';
        errorDiv.style.display = 'block'; // Show error message
        return;
      }

      // Check if password meets minimum length requirement
      if (passwordInput.value.length < 6) {
        e.preventDefault(); // Prevent form submission
        errorDiv.innerHTML = '<i class="fas fa-exclamation-triangle me-2"></i>Password must be at least 6 characters long';
        errorDiv.style.display = 'block'; // Show error message
        return;
      }

      // Add loading class to the submit button to show spinner
      const submitBtn = form.querySelector('button[type="submit"]');
      if (submitBtn) submitBtn.classList.add('loading');
    });

    // Display error message if redirected with error query parameter
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('error') === '1') {
      errorDiv.innerHTML = '<i class="fas fa-exclamation-triangle me-2"></i>Registration failed. Please try again.';
      errorDiv.style.display = 'block'; // Show error message
    }

    // Real-time validation for password confirmation
    if (confirmPasswordInput) {
      confirmPasswordInput.addEventListener('input', function() {
        if (this.value && passwordInput.value !== this.value) {
          this.style.borderColor = '#dc3545'; // Red border if passwords don't match
        } else {
          this.style.borderColor = ''; // Reset to default
        }
      });
    }

    // Add focus and blur effects to input fields
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => {
      input.addEventListener('focus', function() {
        if (this.parentElement) this.parentElement.style.transform = 'scale(1.02)'; // Slight zoom on focus
      });

      input.addEventListener('blur', function() {
        if (this.parentElement) this.parentElement.style.transform = 'scale(1)'; // Reset zoom on blur
      });
    });
  });
</script>
